(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-61949ea0"],{c66d:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"profile"},[r("b-container",[r("b-row",[r("p",{staticClass:"h1 mt-3 mb-3"},[e._v(" My profile ")])]),r("b-alert",{attrs:{show:e.submit,variant:e.error.updated?"success":"danger"}},[e._v(e._s(e.error.updated?"Profile successfully updated":e.error.msg.msg))]),r("b-form",{on:{submit:function(t){return t.preventDefault(),e.update(t)}}},[r("b-row",[r("b-col",[r("b-form-group",{attrs:{"label-for":"email",label:"Email"}},[r("b-input-group",[r("b-input-group-prepend",{attrs:{"is-text":""}},[r("b-icon",{attrs:{icon:"envelope"}})],1),r("b-form-input",{staticClass:"vf-only-bottom-border",attrs:{type:"email",id:"email",placeholder:e.user.email,disabled:""},model:{value:e.user.email,callback:function(t){e.$set(e.user,"email",t)},expression:"user.email"}})],1)],1),r("b-form-group",{attrs:{"label-for":"username",label:"Username"}},[r("b-input-group",[r("b-input-group-prepend",{attrs:{"is-text":""}},[r("b-icon",{attrs:{icon:"person-fill"}})],1),r("b-form-input",{staticClass:"vf-only-bottom-border vf-input-focus",attrs:{type:"text",id:"username",placeholder:e.user.username},model:{value:e.user.username,callback:function(t){e.$set(e.user,"username",t)},expression:"user.username"}})],1)],1)],1)],1),r("b-form-group",{staticClass:"mt-3"},[r("b-button",{staticClass:"btn-block",attrs:{type:"submit",variant:"info"}},[e._v("Update")])],1)],1),r("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.confirm-delete",modifiers:{"confirm-delete":!0}}],staticClass:"btn-block",attrs:{type:"submit",variant:"danger"}},[r("b-icon",{staticClass:"mr-2",attrs:{icon:"trash-fill","aria-hidden":"true"}}),e._v("Delete account")],1),r("b-modal",{attrs:{id:"confirm-delete"},on:{ok:function(t){return e.deleteUser()}}},[r("p",{staticClass:"my-4"},[e._v("Are you sure you want to delete your account? All your data and reviews will be "),r("b",[e._v("erased")])])])],1)],1)},o=[],s="http://localhost:3000/vfilm",n={name:"Profile",data:function(){return{user:{email:"",username:"",created_at:"",updated_at:"",image:""},error:{updated:!1,msg:""},submit:!1}},created:function(){this.getProfile()},methods:{getProfile:function(){var e=this;this.axios.get("".concat(s,"/user/profile"),{headers:{authorization:this.token}}).then((function(t){var r=t.data.user;e.user.username=r.username,e.user.email=r.email,e.user.image=r.image,e.user.created_at=new Date(r.created_at).toLocaleDateString(),e.user.updated_at=new Date(r.updated_at).toLocaleDateString()})).catch((function(e){console.log(e)}))},update:function(){var e=this;this.submit=!0,this.axios.put("".concat(s,"/user/profile/update"),this.user,{headers:{authorization:this.token}}).then((function(t){e.user=t.data.user;var r=t.data.token;e.$store.dispatch("refreshToken",r).then((function(){e.error.updated=!0})).catch((function(e){console.log(e)}))})).catch((function(t){console.log(t),e.error.updated=!1,e.error.msg=t.response.data.errors}))},deleteUser:function(){var e=this;this.axios.delete("".concat(s,"/user"),{headers:{authorization:this.token}}).then((function(t){e.$store.dispatch("logout").then((function(){e.$router.push({path:"/"})})).catch((function(e){console.log(e)}))})).catch((function(t){console.log(t),e.error.updated=!1,e.error.msg=t.response.data.errors}))}},computed:{token:function(){return this.$store.getters.isAuth}}},i=n,u=(r("f45b"),r("2877")),c=Object(u["a"])(i,a,o,!1,null,"67c07c25",null);t["default"]=c.exports},e9ed:function(e,t,r){},f45b:function(e,t,r){"use strict";r("e9ed")}}]);
//# sourceMappingURL=chunk-61949ea0.317bd79a.js.map