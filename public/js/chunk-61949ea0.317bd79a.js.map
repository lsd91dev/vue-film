{"version":3,"sources":["webpack:///./src/views/Profile.vue?4e31","webpack:///src/views/Profile.vue","webpack:///./src/views/Profile.vue?7078","webpack:///./src/views/Profile.vue","webpack:///./src/views/Profile.vue?0089"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","attrs","submit","error","updated","_s","msg","on","$event","preventDefault","update","user","email","model","value","callback","$$v","$set","expression","username","directives","name","rawName","modifiers","deleteUser","staticRenderFns","component"],"mappings":"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","file":"js/chunk-61949ea0.317bd79a.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"profile\"},[_c('b-container',[_c('b-row',[_c('p',{staticClass:\"h1 mt-3 mb-3\"},[_vm._v(\" My profile \")])]),_c('b-alert',{attrs:{\"show\":_vm.submit,\"variant\":_vm.error.updated ? 'success' : 'danger'}},[_vm._v(_vm._s(_vm.error.updated ? 'Profile successfully updated' : _vm.error.msg.msg))]),_c('b-form',{on:{\"submit\":function($event){$event.preventDefault();return _vm.update($event)}}},[_c('b-row',[_c('b-col',[_c('b-form-group',{attrs:{\"label-for\":\"email\",\"label\":\"Email\"}},[_c('b-input-group',[_c('b-input-group-prepend',{attrs:{\"is-text\":\"\"}},[_c('b-icon',{attrs:{\"icon\":\"envelope\"}})],1),_c('b-form-input',{staticClass:\"vf-only-bottom-border\",attrs:{\"type\":\"email\",\"id\":\"email\",\"placeholder\":_vm.user.email,\"disabled\":\"\"},model:{value:(_vm.user.email),callback:function ($$v) {_vm.$set(_vm.user, \"email\", $$v)},expression:\"user.email\"}})],1)],1),_c('b-form-group',{attrs:{\"label-for\":\"username\",\"label\":\"Username\"}},[_c('b-input-group',[_c('b-input-group-prepend',{attrs:{\"is-text\":\"\"}},[_c('b-icon',{attrs:{\"icon\":\"person-fill\"}})],1),_c('b-form-input',{staticClass:\"vf-only-bottom-border vf-input-focus\",attrs:{\"type\":\"text\",\"id\":\"username\",\"placeholder\":_vm.user.username},model:{value:(_vm.user.username),callback:function ($$v) {_vm.$set(_vm.user, \"username\", $$v)},expression:\"user.username\"}})],1)],1)],1)],1),_c('b-form-group',{staticClass:\"mt-3\"},[_c('b-button',{staticClass:\"btn-block\",attrs:{\"type\":\"submit\",\"variant\":\"info\"}},[_vm._v(\"Update\")])],1)],1),_c('b-button',{directives:[{name:\"b-modal\",rawName:\"v-b-modal.confirm-delete\",modifiers:{\"confirm-delete\":true}}],staticClass:\"btn-block\",attrs:{\"type\":\"submit\",\"variant\":\"danger\"}},[_c('b-icon',{staticClass:\"mr-2\",attrs:{\"icon\":\"trash-fill\",\"aria-hidden\":\"true\"}}),_vm._v(\"Delete account\")],1),_c('b-modal',{attrs:{\"id\":\"confirm-delete\"},on:{\"ok\":function($event){return _vm.deleteUser()}}},[_c('p',{staticClass:\"my-4\"},[_vm._v(\"Are you sure you want to delete your account? All your data and reviews will be \"),_c('b',[_vm._v(\"erased\")])])])],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n<div class=\"profile\">\r\n  <b-container>\r\n    <b-row>\r\n        <p class=\"h1 mt-3 mb-3\"> My profile </p>\r\n    </b-row>\r\n    \r\n    <!-- form -->\r\n      <b-alert :show=\"submit\" :variant=\"error.updated ? 'success' : 'danger'\">{{error.updated ? 'Profile successfully updated' : error.msg.msg}}</b-alert>\r\n  <b-form @submit.prevent=\"update\">\r\n      <b-row>  \r\n        <b-col>\r\n  <b-form-group label-for=\"email\" label=\"Email\">\r\n  <b-input-group>\r\n     <b-input-group-prepend is-text>\r\n        <b-icon icon=\"envelope\"></b-icon>\r\n      </b-input-group-prepend>\r\n      <b-form-input type=\"email\" id=\"email\" :placeholder=\"user.email\" v-model=\"user.email\" class=\"vf-only-bottom-border\" disabled></b-form-input>\r\n  </b-input-group>\r\n  </b-form-group>\r\n\r\n    <b-form-group label-for=\"username\" label=\"Username\">\r\n      <b-input-group>\r\n     <b-input-group-prepend is-text>\r\n        <b-icon icon=\"person-fill\"></b-icon>\r\n      </b-input-group-prepend>\r\n      <b-form-input type=\"text\" id=\"username\" :placeholder=\"user.username\" v-model=\"user.username\" class=\"vf-only-bottom-border vf-input-focus\"></b-form-input>\r\n  </b-input-group>\r\n        </b-form-group>\r\n      </b-col>\r\n      </b-row>\r\n      <b-form-group class=\"mt-3\">\r\n        <b-button type=\"submit\" class=\"btn-block\" variant=\"info\">Update</b-button>\r\n      </b-form-group>\r\n    </b-form>\r\n    <b-button type=\"submit\" class=\"btn-block\" variant=\"danger\" v-b-modal.confirm-delete><b-icon icon=\"trash-fill\" aria-hidden=\"true\" class=\"mr-2\"></b-icon>Delete account</b-button>\r\n    <b-modal id=\"confirm-delete\" @ok=\"deleteUser()\">\r\n      <p class=\"my-4\">Are you sure you want to delete your account? All your data and reviews will be <b>erased</b></p>\r\n    </b-modal>\r\n</b-container>\r\n</div>\r\n</template>\r\n\r\n<script>\r\nconst api_url = process.env.VUE_APP_API_URL;\r\n\r\nexport default {\r\n    name:'Profile',\r\n    data(){\r\n      return{\r\n        user: {\r\n          email: '',\r\n          username: '',\r\n          created_at: '',\r\n          updated_at: '',\r\n          image: '',\r\n        },\r\n        error:{\r\n          updated: false,\r\n          msg: ''\r\n        },\r\n        submit: false,\r\n      }\r\n    },\r\n    created: function(){\r\n      this.getProfile();\r\n    },\r\n    methods:{\r\n      getProfile(){\r\n        this.axios.get(`${api_url}/user/profile`, {\r\n          headers:{\r\n            authorization: this.token\r\n          }\r\n        }).then((response)=>{\r\n          let userDB = response.data.user;\r\n          this.user.username = userDB.username;\r\n          this.user.email = userDB.email;\r\n          this.user.image =  userDB.image;\r\n          this.user.created_at = new Date (userDB.created_at).toLocaleDateString();\r\n          this.user.updated_at = new Date(userDB.updated_at).toLocaleDateString();\r\n        }).catch((error)=>{\r\n          console.log(error);\r\n        })\r\n      },\r\n\r\n      update(){\r\n        this.submit = true;\r\n        this.axios.put(`${api_url}/user/profile/update`,this.user, {\r\n          headers:{\r\n            authorization: this.token\r\n          }\r\n        }).then((response)=>{\r\n          this.user = response.data.user;\r\n          let token = response.data.token;\r\n          this.$store.dispatch('refreshToken',token).then(()=>{\r\n            this.error.updated = true;\r\n          }).catch((error)=>{\r\n            console.log(error);\r\n            \r\n          });\r\n        }).catch((error)=>{\r\n          console.log(error);\r\n          this.error.updated = false;\r\n          this.error.msg = error.response.data.errors;\r\n        })\r\n      },\r\n      deleteUser(){\r\n         this.axios.delete(`${api_url}/user`, {\r\n          headers:{\r\n            authorization: this.token\r\n          }\r\n        }).then((response)=>{\r\n          this.$store.dispatch('logout').then(()=>{\r\n            this.$router.push({path:'/'})\r\n          }).catch((error)=>{\r\n            console.log(error);\r\n          });\r\n        }).catch((error)=>{\r\n          console.log(error);\r\n          this.error.updated = false;\r\n          this.error.msg = error.response.data.errors;\r\n        })\r\n      }\r\n    },\r\n    computed:{\r\n      token : function() { return this.$store.getters.isAuth }\r\n    }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\nlabel {\r\n  margin-left: 3rem;\r\n}\r\n\r\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Profile.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Profile.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Profile.vue?vue&type=template&id=67c07c25&scoped=true&\"\nimport script from \"./Profile.vue?vue&type=script&lang=js&\"\nexport * from \"./Profile.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Profile.vue?vue&type=style&index=0&id=67c07c25&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"67c07c25\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Profile.vue?vue&type=style&index=0&id=67c07c25&scoped=true&lang=css&\""],"sourceRoot":""}